{% if (not buttonColor|length) or ((background) == buttonColor) %}
    {% set background = background|default("white") %}
    {% switch background %}
        {% case "white" %}
            {% set buttonColor = 'primary' %}

        {% default %}
            {% set buttonColor = 'primary' %}
    {% endswitch %}
{% endif %}

{% set colors = {
    button : {
        white: "text-gray-500 bg-white hover:bg-waterloo-50",
        black: "text-white bg-gray-950 hover:bg-gray-700",
        gray: "text-white bg-gray-500 hover:bg-gray-600",
        primary: "text-white bg-primary-500 hover:bg-primary-600",
    },
    outline : {
        white: "text-white hover:text-gray-950 border-white hover:bg-white",
        black: "text-gray-950 hover:text-white border-gray-950 hover:bg-gray-950",
        gray: "text-gray-500 hover:text-white border-gray-500 hover:bg-gray-500",
        primary: "text-primary-500 hover:text-white border-primary-500 hover:bg-primary-500",
    },
    link : {
        white: "text-white hover:border-white",
        black: "text-gray-950 hover:border-gray-950",
        gray: "text-gray-500 hover:border-gray-500",
        primary: "text-primary-500 hover:border-primary-500",
    }
} %}

{% set attributes = collect({
    href: button.getUrl(),
    class: [
        class,
        colors[buttonType][buttonColor] ?? null,
        extraClasses|length ? extraClasses : buttonType == 'link'
            ? "flex md:text-2xl text-lg font-bold border-b-2 border-transparent duration-300 items-center inline-block leading-6 transition-all #{button.classes}"
            : "inline-flex rounded-full px-4 py-1.5 text-sm font-semibold transition bg-cyprus-500 text-white hover:bg-cyprus-400 #{button.classes} " ~ (buttonType == 'outline' ? 'border'),
        icon|length and iconPosition == 'left' ? 'flex-row-reverse' : null
    ]
}) %}

{% if not button.isEmpty() and button.getType() == 'asset' and (button.getElement().extension == 'pdf' or button.getElement().extension == 'doc') %}
    {% set attributes = attributes.merge({
        target: "_blank",
        rel: "noopener"
    }) %}
{% endif %}

{% if button.linkTitle %}
    {% set attributes = attributes.merge({
        title: button.linkTitle,
    }) %}
{% endif %}

{% if button.customAttributes %}
    {% for attribute in button.customAttributes %}
        {% set attributes = attributes.merge({
            (attribute.attribute): attribute.value
        }) %}
    {% endfor %}
{% endif %}

{% if button.target %}
    {% set attributes = attributes.merge({
        target: "_blank",
        rel: "noopener"
    }) %}
{% endif %}

{% if not button.isEmpty() %}
    <a {{ attr(attributes.toArray()) }}>
        {% if icon|length %}
            <span class="{{ iconPosition == 'left' ? 'pl-2' : 'pr-2' }} flex-1">
        {% endif %}
            {{ button.getText() }}
        {% if icon|length %}
            </span>
        {% endif %}

        {% if icon|length %}
            {{ svg(icon.path)|attr({
                class: 'h-4 w-4'
            }) }}
        {% endif %}

        {% if button.getText()|lower in ["read more", "see more", "learn more", "click here"] %}
            <span class="sr-only"> {{ "about this"|t }}</span>
        {% endif %}
    </a>
{% endif %}