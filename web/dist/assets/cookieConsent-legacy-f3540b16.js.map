{"version":3,"file":"cookieConsent-legacy-f3540b16.js","sources":["../../../src/js/cookie-consent.js"],"sourcesContent":["document.addEventListener('afterBlitzInject', function (event) {\n    if(event.detail.element.querySelector(\"#elc-cookie-consent\")) {\n        /*\n         * addEventListner: For all major browsers, except IE 8 and earlier\n         * attachEvent:     For IE 8 and earlier versions\n         */\n        let detailLink = document.getElementById(\"elc-detail-link\");\n        if (detailLink !== null) {\n            if (detailLink.addEventListener) {\n                detailLink.addEventListener(\"click\", toggleExpand);\n            } else if (detailLink.attachEvent) {\n                detailLink.attachEvent(\"onclick\", toggleExpand);\n            }\n        }\n\n        let hideDetailLink = document.getElementById(\"elc-hide-detail-link\");\n        if (hideDetailLink !== null) {\n            if (hideDetailLink.addEventListener) {\n                hideDetailLink.addEventListener(\"click\", toggleExpand);\n            } else if (hideDetailLink.attachEvent) {\n                hideDetailLink.attachEvent(\"onclick\", toggleExpand);\n            }\n        }\n\n        let saveLink = document.getElementById(\"elc-save-link\");\n        if (saveLink !== null) {\n            if (saveLink.addEventListener) {\n                saveLink.addEventListener(\"click\", submitConsent);\n            } else if (saveLink.attachEvent) {\n                saveLink.attachEvent(\"onclick\", submitConsent);\n            }\n        }\n\n        let acceptLink = document.getElementById(\"elc-accept-link\");\n        if (acceptLink !== null) {\n            if (acceptLink.addEventListener) {\n                acceptLink.addEventListener(\"click\", submitConsent);\n            } else if (acceptLink.attachEvent) {\n                acceptLink.attachEvent(\"onclick\", submitConsent);\n            }\n        }\n\n\n        let acceptAllLink = document.getElementById(\"elc-accept-all-link\");\n        if (acceptAllLink !== null) {\n            if (acceptAllLink.addEventListener) {\n                acceptAllLink.addEventListener(\"click\", submitAllConsent);\n            } else if (acceptAllLink.attachEvent) {\n                acceptAllLink.attachEvent(\"onclick\", submitAllConsent);\n            }\n        }\n\n        let tabLink = document.getElementById(\"elc-tab-link\");\n        if (tabLink !== null) {\n            if (tabLink.addEventListener) {\n                tabLink.addEventListener(\"click\", toggleTab);\n            } else if (tabLink.attachEvent) {\n                tabLink.attachEvent(\"onclick\", toggleTab);\n            }\n        }\n\n        addWindowObject();\n    }\n});\n\nfunction submitConsent(event) {\n\n    event.preventDefault();\n\n    let form = document.querySelector('#elc-cookie-consent-form');\n    let data = serialize(form);\n\n    document.getElementById(\"elc-cookie-consent\").classList.toggle('elc-hidden');\n    let cookieTab = document.getElementById(\"elc-cookie-tab\");\n    if(typeof cookieTab !== 'undefined' && cookieTab !== null) document.getElementById(\"elc-cookie-tab\").classList.toggle('elc-hidden');\n\n    let xhr = new XMLHttpRequest();\n    xhr.open('POST', form.dataset.url);\n    xhr.setRequestHeader('Content-Type', 'application/x-www-form-urlencoded');\n    xhr.send(data);\n\n    xhr.onreadystatechange = function () {\n        if (xhr.readyState === 4) {\n            addWindowObject()\n            if (xhr.status !== 200) console.log('Error: ' + xhr.status);\n            else {\n                document.querySelectorAll(\".elc-cookie-checkbox\").forEach(function(item) {\n                    setCookie('cookie-consent-' + item.name, item.checked ? \"on\" : \"off\", 365);\n                });\n\n                if (form.hasAttribute(\"data-refresh\") && form.dataset.refresh === \"true\" && form.hasAttribute(\"data-refreshtime\")) {\n                    refresh(form.dataset.refreshtime)\n                }\n            }\n        }\n    }\n}\nwindow.submitConsent = submitConsent;\n\nfunction submitAllConsent(event) {\n\n    event.preventDefault();\n\n    let form = document.querySelector('#elc-cookie-consent-form');\n\n    for (let i = 0; i < form.elements.length; i++ ) {\n\n        if (form.elements[i].type == 'checkbox') {\n\n            if (form.elements[i].checked == false) {\n                form.elements[i].checked = true;\n            }\n        }\n    }\n\n    let data = serialize(form);\n    document.getElementById(\"elc-cookie-consent\").classList.toggle('elc-hidden');\n    let cookieTab = document.getElementById(\"elc-cookie-tab\");\n    if(typeof cookieTab !== 'undefined' && cookieTab !== null) document.getElementById(\"elc-cookie-tab\").classList.toggle('elc-hidden');\n\n    let xhr = new XMLHttpRequest();\n    xhr.open('POST', form.dataset.url);\n    xhr.setRequestHeader('Content-Type', 'application/x-www-form-urlencoded');\n    xhr.send(data.concat('&acceptAll=true'));\n\n    xhr.onreadystatechange = function () {\n        if (xhr.readyState === 4) {\n            if (xhr.status !== 200) console.log('Error: ' + xhr.status);\n            else if (form.hasAttribute(\"data-refresh\") && form.dataset.refresh === \"true\" && form.hasAttribute(\"data-refreshtime\")) {\n                refresh(form.dataset.refreshtime)\n            }\n        }\n    }\n}\nwindow.submitAllConsent = submitAllConsent;\n\n\nfunction refresh(ms) {\n    setTimeout(function() {\n        location.reload();\n    }, ms);\n}\nwindow.refresh = refresh;\n\nfunction toggleExpand(event)\n{\n    event.preventDefault();\n    document.getElementById(\"elc-cookie-consent\").classList.toggle('elc-fullwidth');\n    document.getElementById(\"elc-cookie-consent\").classList.toggle('elc-small');\n}\nwindow.toggleExpand = toggleExpand;\n\nfunction toggleTab(event)\n{\n    event.preventDefault();\n    document.getElementById(\"elc-cookie-consent\").classList.toggle('elc-hidden');\n    document.getElementById(\"elc-cookie-tab\").classList.toggle('elc-hidden');\n\n    document.getElementById(\"elc-cookie-consent\").classList.add('elc-fullwidth');\n    document.getElementById(\"elc-cookie-consent\").classList.remove('elc-small');\n}\nwindow.toggleTab = toggleTab;\n\nfunction addWindowObject()\n{\n    let form = document.querySelector('#elc-cookie-consent-form');\n    if (typeof form.dataset.show !== 'undefined')\n    {\n        let xhr = new XMLHttpRequest();\n        xhr.open('GET', form.dataset.show);\n        xhr.send();\n\n        xhr.onreadystatechange = function () {\n            if (xhr.readyState === 4) {\n                if (xhr.status !== 200) {\n                    console.log('Error: ' + xhr.status);\n                    window.ccc = {}\n                }\n                else {\n                    if(xhr.response === 'null') {\n                        window.ccc = {}\n                    }\n                    else window.ccc = JSON.parse(xhr.response)\n                }\n            }\n        }\n    }\n}\nwindow.addWindowObject = addWindowObject;\n\n/*!\n * Serialize all form data into a query string\n * (c) 2018 Chris Ferdinandi, MIT License, https://gomakethings.com\n * @param  {Node}   form The form to serialize\n * @return {String}      The serialized form data\n */\nvar serialize = function (form) {\n\n    // Setup our serialized data\n    var serialized = [];\n\n    // Loop through each field in the form\n    for (var i = 0; i < form.elements.length; i++) {\n\n        var field = form.elements[i];\n\n        // Don't serialize fields without a name, submits, buttons, file and reset inputs, and disabled fields\n        if (!field.name || field.disabled || field.type === 'file' || field.type === 'reset' || field.type === 'button') continue;\n\n        // If a multi-select, get all selections\n        if (field.type === 'select-multiple') {\n            for (var n = 0; n < field.options.length; n++) {\n                if (!field.options[n].selected) continue;\n                serialized.push(encodeURIComponent(field.name) + \"=\" + encodeURIComponent(field.options[n].value));\n            }\n        }\n\n        // Convert field data to a query string\n        else if ((field.type !== 'checkbox' && field.type !== 'radio') || field.checked) {\n            serialized.push(encodeURIComponent(field.name) + \"=\" + encodeURIComponent(field.value));\n        }\n    }\n\n    return serialized.join('&');\n\n};\nwindow.serialize = serialize;\n\nfunction setCookie(cname, cvalue, exdays) {\n    const d = new Date();\n    d.setTime(d.getTime() + (exdays*24*60*60*1000));\n    let expires = \"expires=\"+ d.toUTCString();\n    document.cookie = cname + \"=\" + cvalue + \";\" + expires + \";path=/\";\n}"],"names":["submitConsent","event","preventDefault","form","document","querySelector","data","serialize","getElementById","classList","toggle","cookieTab","xhr","XMLHttpRequest","open","dataset","url","setRequestHeader","send","onreadystatechange","readyState","addWindowObject","status","console","log","querySelectorAll","forEach","item","cname","cvalue","exdays","d","Date","setTime","getTime","expires","toUTCString","cookie","setCookie","name","checked","hasAttribute","refresh","refreshtime","submitAllConsent","i","elements","length","type","concat","ms","setTimeout","location","reload","toggleExpand","toggleTab","add","remove","show","window","ccc","response","JSON","parse","addEventListener","detail","element","detailLink","attachEvent","hideDetailLink","saveLink","acceptLink","acceptAllLink","tabLink","serialized","field","disabled","n","options","selected","push","encodeURIComponent","value","join"],"mappings":"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"}